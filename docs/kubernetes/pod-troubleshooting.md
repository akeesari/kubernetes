To troubleshoot an AKS (Azure Kubernetes Service) pod, you can follow these steps:

## login to Azure

Verify that you are logged into the right Azure subscription before start anything in visual studio code

``` sh
# Login to Azure
az login 

# Set Azure subscription
az account set -s "anji.keesari"
```

## Connect to Cluster
``` sh
# Azure Kubernetes Service Cluster User Role
az aks get-credentials -g "rg-aks-dev" -n "aks-cluster1-dev"

# Azure Kubernetes Service Cluster Admin Role
az aks get-credentials -g "rg-aks-dev" -n "aks-cluster1-dev" --admin

# get nodes
kubectl get no
kubectl get namespace -A
```

## Verify the pod status

Verify the pod status by running following commands.

```
kubectl get pods -n sample
kubectl get svc -n sample
```

## Describe the pod

To describe a pod in Kubernetes, you can use the kubectl describe command. 

```
kubectl describe pod/aspnet-api-6b7d8fbf9f-mqtnd -n sample
```

## Check the logs

Use command to view the logs generated by the pod and its containers. This can give you valuable information about what is causing the issue with the pod.

```
kubectl logs pod/aspnet-api-6b7d8fbf9f-mqtnd -n sample
```

## Debug the container

This command allows you to execute a command in a container in a pod.

```
kubectl exec -n sample -it aspnet-api-6b7d8fbf9f-mqtnd -- bash
# or
kubectl exec -n sample -it aspnet-api-6b7d8fbf9f-mqtnd -- /bin/sh
# or
kubectl exec -n sample -it aspnet-api-6b7d8fbf9f-mqtnd -- sh
```

check the deployed files by running `ls` command
```
root@aspnet-api-6b7d8fbf9f-mqtnd:/app# ls
AspNetApi            AspNetApi.runtimeconfig.json                         Newtonsoft.Json.dll                    appsettings.Development.json
AspNetApi.deps.json  Microsoft.AspNetCore.Mvc.Versioning.ApiExplorer.dll  Swashbuckle.AspNetCore.Swagger.dll     appsettings.json
AspNetApi.dll        Microsoft.AspNetCore.Mvc.Versioning.dll              Swashbuckle.AspNetCore.SwaggerGen.dll  manifest
AspNetApi.pdb        Microsoft.OpenApi.dll                                Swashbuckle.AspNetCore.SwaggerUI.dll   web.config
```

## Exit from the container

run the `exit` command to exit from running container.

``` 
# exit
```
## install curl

install following tools as per the need
```
apt-get -y update; apt-get -y install curl
```

output
```
Get:1 http://deb.debian.org/debian bullseye InRelease [116 kB]
Get:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]
Get:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
Get:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]
Get:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [229 kB]
Get:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]
Fetched 8635 kB in 1s (5772 kB/s)
Reading package lists... Done
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
.
.
.
```
## curl internal pod URL

```
curl http://aspnet-api.namespace.svc.cluster.local:80/aspnetapi
curl http://aspnet-api.sample.svc.cluster.local:80/aspnetapi
```

## Restart the pod:

To restart a pod in Kubernetes, you can use the `kubectl delete pod` command followed by the name of the pod you want to restart. When you delete a pod, Kubernetes will automatically create a new one to replace it.

```
kubectl delete pod/aspnet-api-6b7d8fbf9f-mqtnd -n sample
```
output
```
pod "aspnet-api-6b7d8fbf9f-mqtnd" deleted
```

<!--
## scale up or down

If the issue is related to resource constraints, you can scale up or down the replicas of the deployment using the kubectl scale command.

-->
It's also important to keep in mind that the troubleshooting steps may vary depending on the specific problem with the pod.

## Reference

- <https://learn.microsoft.com/en-us/azure/aks/ingress-basic?tabs=azure-powershell>