
In this lab we are going to create plain yaml manifest files for deployment, service & ingress for our first microservice `aspnet-api` and apply these yaml manifest files using `kubectl` command manually in AKS and finally test the microservice-1 to make sure that these yaml manifests are correct.

Once we prove that these plain yaml manifest are working then in the future labs it is easy to convert these yaml manifest files into Helm chart and deploy as a package to AKS cluster.

## Implementation details

In this exercise we will accomplish & learn how to implement following:

- **Step-1:** Create deployment manifest
- **Step-2:** Create service manifest
- **Step-3:** Create ingress manifest
- **Step-4:** Deploy manifest files in AKS
- **Step-5:** Test Microservice-1 running in AKS

## Step-1: Create deployment manifest

``` yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: aspnet-api
  namespace: sample
spec:
  replicas: 1
  selector: 
    matchLabels:
      app: aspnet-api
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  minReadySeconds: 5 
  template:
    metadata:
      labels:
        app: aspnet-api
    spec:
      nodeSelector:
        "kubernetes.io/os": linux
      serviceAccountName: default
      containers:
        - name: aspnet-api
          image: acr1dev.azurecr.io/sample/aspnet-api:20230323.15
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP

# kubectl apply -f deployment.yaml -n sample
```

## Step-2: Create service manifest
``` yaml
apiVersion: v1
kind: Service
metadata:
  name: aspnet-api
  namespace: sample
  labels: {}
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 80
      protocol: TCP
      name: http
  selector: 
    app: aspnet-api

# kubectl apply -f service.yaml -n sample
```
## Step-3: Create ingress manifest
``` yaml
```
## Step-4: Deploy manifest files in AKS
## Step-5: Test Microservice-1 running in AKS